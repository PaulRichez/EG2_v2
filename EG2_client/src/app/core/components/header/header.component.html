<div class="flex flex-row justify-content-between align-items-end p-sidebar relative" #parentDiv>
    <div class="w-full flex flex-row">
        <div #buttonToggleSidebar class="flex  align-items-center ">
            <button pButton pRipple type="button" icon="pi pi-bars"
                class="p-button-secondary p-button-text"
                (click)="toggleSidebar.emit()"></button>
        </div>
        <div class="w-full">
            <p-tabView *ngIf="applicationsService.currentApp" [scrollable]="true" [activeIndex]="activeIndex"
                styleClass="headerTab" (onChange)="handleChange($event)">
                <p-tabPanel *ngFor="let app of applicationsService.applicationsTab">
                    <ng-template pTemplate="header">
                        <div class="flex flex-row justify-content-center align-items-center">
                            <span><i class="{{ app.icon }}"></i></span>
                            <span class="ml-2 hidden md:inline white-space-nowrap">{{ app.label }}</span>
                            <button pButton pRipple type="button" icon="pi pi-times"
                                class="ml-2 p-button-secondary p-button-text p-button-sm"
                                [disabled]="applicationsService.applicationsTab.length == 1"
                                (click)="applicationsService.closeApp(app)"></button>
                        </div>
                    </ng-template>
                </p-tabPanel>
            </p-tabView>
        </div>
    </div>

    <div #avatarDiv>
        <button type="text" pButton (click)="menu.toggle($event)" class="p-button p-button-text">
            <span class="mr-1 hidden lg:inline">{{ authentificationService.connectedUser.username}}</span>
            <app-avatar [user]="authentificationService.connectedUser" [size]="'large'"></app-avatar>
            <i class="ml-1 pi pi-chevron-down"></i>
        </button>
    </div>
</div>

<p-menu #menu [popup]="true" [model]="items" [appendTo]="'body'"></p-menu>